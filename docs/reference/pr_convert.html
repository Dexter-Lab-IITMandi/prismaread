<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>pr_convert — pr_convert • prismaread</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="pr_convert — pr_convert" />
<meta property="og:description" content="Access a PRISMA L1 HDF5 file and convert it to ENVI or GeoTiff
 format" />
<meta property="og:image" content="https://github.com/lbusett/prismaread/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">prismaread</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/prismaread.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Importing-Level-1-Data.html">Importing Level 1 Data</a>
    </li>
    <li>
      <a href="../articles/Importing-Level-2-Data.html">Importing Level 2 Data</a>
    </li>
    <li>
      <a href="../articles/Computing-Spectral-Indexes.html">Computing Spectral Indexes</a>
    </li>
    <li>
      <a href="../articles/Output-Format-and-Naming.html">Output Format and Naming</a>
    </li>
    <li>
      <a href="../articles/Extracting-data-over-vector.html">Extracting Data Over Vector Features</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/lbusett/prismaread/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>pr_convert</h1>
    <small class="dont-index">Source: <a href='https://github.com/lbusett/prismaread/blob/master/R/pr_convert.R'><code>R/pr_convert.R</code></a></small>
    <div class="hidden name"><code>pr_convert.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Access a PRISMA L1 HDF5 file and convert it to ENVI or GeoTiff
 format</p>
    </div>

    <pre class="usage"><span class='fu'>pr_convert</span>(
  <span class='kw'>in_file</span>,
  <span class='kw'>out_folder</span>,
  out_filebase = <span class='st'>"auto"</span>,
  out_format = <span class='st'>"ENVI"</span>,
  base_georef = <span class='fl'>TRUE</span>,
  fill_gaps = <span class='fl'>TRUE</span>,
  VNIR = <span class='fl'>FALSE</span>,
  SWIR = <span class='fl'>FALSE</span>,
  FULL = <span class='fl'>FALSE</span>,
  source = <span class='st'>"HCO"</span>,
  join_priority = <span class='st'>"SWIR"</span>,
  ATCOR = <span class='fl'>FALSE</span>,
  ATCOR_wls = <span class='kw'>NULL</span>,
  PAN = <span class='fl'>FALSE</span>,
  CLOUD = <span class='fl'>FALSE</span>,
  LC = <span class='fl'>FALSE</span>,
  GLINT = <span class='fl'>FALSE</span>,
  ANGLES = <span class='fl'>FALSE</span>,
  LATLON = <span class='fl'>FALSE</span>,
  ERR_MATRIX = <span class='fl'>FALSE</span>,
  apply_errmatrix = <span class='fl'>FALSE</span>,
  overwrite = <span class='fl'>FALSE</span>,
  in_L2_file = <span class='kw'>NULL</span>,
  selbands_vnir = <span class='kw'>NULL</span>,
  selbands_swir = <span class='kw'>NULL</span>,
  indexes = <span class='kw'>NULL</span>,
  cust_indexes = <span class='kw'>NULL</span>,
  keep_index_cube = <span class='fl'>FALSE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>in_file</th>
      <td><p>`character` full path of input HDF5 file</p></td>
    </tr>
    <tr>
      <th>out_folder</th>
      <td><p>`character` full path to output folder</p></td>
    </tr>
    <tr>
      <th>out_filebase</th>
      <td><p>`character` if "auto", output file names are based on
filename of the input prisma file, with appropriate suffixes. If a different
string is provided, it is used as prefix instead of the input file name,
Default: "auto"</p></td>
    </tr>
    <tr>
      <th>out_format</th>
      <td><p>`character`` ["GTiff" | "ENVI"], Output format, Default: 'GTiff'</p></td>
    </tr>
    <tr>
      <th>base_georef</th>
      <td><p>`logical` if TRUE, apply base georeferencing on L1, L2B/C data,
using the "Georeference from input GLT" procedure explained here:
https://www.harrisgeospatial.com/docs/backgroundgltbowtiecorrection.html,
Default: TRUE</p></td>
    </tr>
    <tr>
      <th>fill_gaps</th>
      <td><p>`logical` if TRUE, when georeferencing on L1, L2B/C data,
substitute missing values with results of a 3x3 focal filter on the georeferenced
data, Default: TRUE</p></td>
    </tr>
    <tr>
      <th>VNIR</th>
      <td><p>`logical` if TRUE, create the VNIR image, Default: FALSE</p></td>
    </tr>
    <tr>
      <th>SWIR</th>
      <td><p>`logical` if TRUE, create the SWIR image, Default: FALSE</p></td>
    </tr>
    <tr>
      <th>FULL</th>
      <td><p>`logical` if TRUE, create a single multispectral image from
VNIR and SWIR, Default: FALSE</p></td>
    </tr>
    <tr>
      <th>source</th>
      <td><p>`character` ["HC0" | "HRC"], Considered Data Cube Default: 'HCO'</p></td>
    </tr>
    <tr>
      <th>join_priority</th>
      <td><p>`character` ["VNIR" | "SWIR"], spectrometer to consider in
the when join_spectra = TRUE, Default: SWIR - ignored if join_spectra is FALSE.
Default: "SWIR"</p></td>
    </tr>
    <tr>
      <th>ATCOR</th>
      <td><p>logical` if TRUE, create the text files required to run ATCOR, Default: FALSE;</p></td>
    </tr>
    <tr>
      <th>ATCOR_wls</th>
      <td><p>NULL, or `numeric` If NULL the only ATCOR wvl file
created is the one containing Nominal wavelengths. If a numeric vector is provided,
then one different wvl file is created for each selected COLUMN selected (e.g., if
providing `ATCOR_wls = c(200, 800)`, then the wavelengths and FWHMs related to
columns 200 and 800 are saved.)</p></td>
    </tr>
    <tr>
      <th>PAN</th>
      <td><p>`logical` if TRUE, also save PAN data, default: TRUE (Ignored for L2 data)</p></td>
    </tr>
    <tr>
      <th>CLOUD</th>
      <td><p>`logical` if TRUE, also save CLOUD MASK mask data, default: TRUE (Ignored for L2 data).
It is coded as:
  0 for not cloudy pixel
  1 for cloudy pixel
  10 = for not of all previous classification
  255 = error</p></td>
    </tr>
    <tr>
      <th>LC</th>
      <td><p>`logical` if TRUE, also save the LAND COVER data, default: TRUE (Ignored for L2 data)
It is coded as:
 0 for water pixel
 1 for snow pixel (and ice)
 2 for not-vegetated land pixel :bare soil)
 3 for crop and rangeland pixel
 4 for forest pixel
 5 for wetland pixel
 6 for not-vegetated land pixel :urban component
10 for not of all previous classification
255 for error</p></td>
    </tr>
    <tr>
      <th>GLINT</th>
      <td><p>`logical` if TRUE, also save GLINT mask data, default: TRUE (Ignored for L2 data)
It is coded as:
0 for not sun glint
1 for sun glint
10 for not of all previous classification
255 = error</p></td>
    </tr>
    <tr>
      <th>ANGLES</th>
      <td><p>if TRUE, also save the ACQUISITION ANGLES data. ANGLES data are saved as
a 3-band raster. Band 1 contains "viewzen_ang", Band 2 contains "relaz_ang" and
Band 3 contains "solzen_ang"), default: FALSE</p></td>
    </tr>
    <tr>
      <th>LATLON</th>
      <td><p>if TRUE, also save the LATITUDE and LONGITUDE data. LATLON data are saved as
a 2-band raster. Band 1 contains "Lat", Band 2 contains "Lon", default: FALSE</p></td>
    </tr>
    <tr>
      <th>ERR_MATRIX</th>
      <td><p>`logical` if TRUE, also save the SATURATION ERROR MATRIX Data, default: FALSE
SATURATION ERROR MATRIX is coded as:
 0=pixel ok;
 1=DEFECTIVE PIXEL from KDP
 2= Pixel in saturation.
 3= Pixel with lower radiometric accuracy, due to coregistration effects.
 4= Pixel becomes NaN or Inf during processing.</p></td>
    </tr>
    <tr>
      <th>apply_errmatrix</th>
      <td><p>Not yet implemented!</p></td>
    </tr>
    <tr>
      <th>overwrite</th>
      <td><p>`logical` if TRUE, existing files are overwritten, default: FALSE</p></td>
    </tr>
    <tr>
      <th>in_L2_file</th>
      <td><p>`character` full path of an L2B/C file to be used to extract georeferencing
info and angles for a corresponding L1 file. If not NULL, and `in_file` is a L1 file, the LAT and LON
fields used for bowtie georeferencing are taken from the L2 file instead than from the L1 file. The ANGLES
data are also retrieved from the L2 file.</p></td>
    </tr>
    <tr>
      <th>selbands_vnir</th>
      <td><p>`numeric array` containing wavelengths (in nanometers) of bands that should be extracted from
the VNIR data cube. If not NULL, only the bands with wavelengths closest to these values are extracted, Default: NULL</p></td>
    </tr>
    <tr>
      <th>selbands_swir</th>
      <td><p>`numeric array` containing wavelengths (in nanometers) of bands that should be extracted from
the SWIR data cube. If not NULL, only the bands with wavelengths closest to these values are extracted, Default: NULL</p></td>
    </tr>
    <tr>
      <th>indexes</th>
      <td><p>`character` array of names of indexes to be computed. You can
see a list of available indexes using command `pr_listindexes()`, or see
the corresponding table at: https://lbusett.github.io/prismaread/articles/Computing-Spectral-Indexes.html</p></td>
    </tr>
    <tr>
      <th>cust_indexes</th>
      <td><p>`character` named list containing names and formulas of custom
indexes to be computed. The indexes formulas must be computable R formulas, where
bands are referred to by the prefix "b", followed by the wavelength (e.g.,
`cust_indexes = list(myindex1 = "R500 / R600",
                     myindex2 = "(R800 - R680) / (R800 + R680)")`</p></td>
    </tr>
    <tr>
      <th>keep_index_cube</th>
      <td><p>`logical`, if TRUE, and spectral indexes were computed,
keep in the output folder the hyperspectral cube used to compute the indexes (
containing only wavelengths required to compute the desired indexes). The file
takes a "_INDEXES" suffix. If FALSE, put the file in tempdir so that it is
 deleted automatically afterwards. Default: FALSE</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The function is called for its side effects</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>if</span> (<span class='fl'>FALSE</span>) {
 <span class='kw'>in_file</span>    <span class='op'>&lt;-</span> <span class='st'>"/home/lb/tmp/test/PRS_L1_STD_OFFL_20190825103112_20190825103117_0001.he5"</span>
 <span class='kw'>out_folder</span> <span class='op'>&lt;-</span> <span class='st'>"/home/lb/tmp/test/"</span>
 <span class='kw'>out_format</span> <span class='op'>&lt;-</span> <span class='st'>"ENVI"</span>

 <span class='co'># Save VNIR Cube image</span>
 <span class='fu'>pr_convert</span>(in_file       = <span class='kw'>in_file</span>,
                out_folder    = <span class='kw'>out_folder</span>,
                out_format    = <span class='kw'>out_format</span>,
                VNIR          = <span class='fl'>TRUE</span>,
                SWIR          = <span class='fl'>TRUE</span>,
                FULL          = <span class='fl'>FALSE</span>,
                overwrite     = <span class='fl'>TRUE</span>
                )

 <span class='co'># Save also the full cube, prioritizing the VNIR spectrometer and save in ENVI format</span>
 <span class='co'># Also save Cloud and LC data. Also, use a custom prefix for output files</span>
 <span class='fu'>pr_convert</span>(in_file       = <span class='kw'>in_file</span>,
                out_folder    = <span class='kw'>out_folder</span>,
                out_filebase  = <span class='st'>"prismaout_2020_05-14"</span>,
                out_format    = <span class='kw'>out_format</span>,
                FULL          = <span class='fl'>TRUE</span>,
                join_priority = <span class='st'>"VNIR"</span>,
                LC            = <span class='fl'>TRUE</span>,
                CLOUD         = <span class='fl'>TRUE</span>,
                overwrite     = <span class='fl'>TRUE</span>
                )

 <span class='co'># Save a full image, prioritizing the SWIR spectrometer and save in TIF format,</span>
 <span class='co'># Also create ATCOR files, with Nominal wavelengths</span>

 <span class='fu'>pr_convert</span>(in_file       = <span class='kw'>in_file</span>,
                out_folder    = <span class='kw'>out_folder</span>,
                out_format    = <span class='st'>"TIF"</span>,
                FULL          = <span class='fl'>TRUE</span>,
                join_priority = <span class='st'>"VNIR"</span>,
                ATCOR         = <span class='fl'>TRUE</span>,
                LC            = <span class='fl'>TRUE</span>,
                CLOUD         = <span class='fl'>TRUE</span>,
                overwrite     = <span class='fl'>TRUE</span>
                )


}
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Lorenzo Busetto, Luigi Ranghetti.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.0.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


