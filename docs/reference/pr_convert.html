<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Extract data from a PRISMA he5 file and convert to GTiff or ENVI — pr_convert • prismaread</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Extract data from a PRISMA he5 file and convert to GTiff or ENVI — pr_convert" />
<meta property="og:description" content="Access a PRISMA HDF5 file and convert it to ENVI or GeoTiff
 format" />
<meta property="og:image" content="https://github.com/irea-cnr-mi/prismaread/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">prismaread</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>

  </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/irea-cnr-mi/prismaread/">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/Importing-Level-1-Data.html">Importing Level 1 Data</a>
    </li>
    <li>
      <a href="../articles/Importing-Level-2-Data.html">Importing Level 2 Data</a>
    </li>
    <li>
      <a href="../articles/Computing-Spectral-Indexes.html">Computing Spectral Indices</a>
    </li>
    <li>
      <a href="../articles/Output-Format-and-Naming.html">Output Format and Naming</a>
    </li>
    <li>
      <a href="../articles/Extracting-data-over-vector.html">Extracting Data Over Vector Features</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>

    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Extract data from a PRISMA he5 file and convert to GTiff or ENVI</h1>
    <small class="dont-index">Source: <a href='https://github.com/irea-cnr-mi/prismaread/blob/master/R/pr_convert.R'><code>R/pr_convert.R</code></a></small>
    <div class="hidden name"><code>pr_convert.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Access a PRISMA HDF5 file and convert it to ENVI or GeoTiff
 format</p>
    </div>

    <pre class="usage"><span class='fu'>pr_convert</span><span class='op'>(</span>
  <span class='va'>in_file</span>,
  <span class='va'>out_folder</span>,
  out_filebase <span class='op'>=</span> <span class='st'>"auto"</span>,
  out_format <span class='op'>=</span> <span class='st'>"ENVI"</span>,
  base_georef <span class='op'>=</span> <span class='cn'>TRUE</span>,
  fill_gaps <span class='op'>=</span> <span class='cn'>FALSE</span>,
  VNIR <span class='op'>=</span> <span class='cn'>FALSE</span>,
  SWIR <span class='op'>=</span> <span class='cn'>FALSE</span>,
  FULL <span class='op'>=</span> <span class='cn'>FALSE</span>,
  source <span class='op'>=</span> <span class='st'>"HCO"</span>,
  join_priority <span class='op'>=</span> <span class='st'>"SWIR"</span>,
  ATCOR <span class='op'>=</span> <span class='cn'>FALSE</span>,
  ATCOR_wls <span class='op'>=</span> <span class='cn'>NULL</span>,
  PAN <span class='op'>=</span> <span class='cn'>FALSE</span>,
  CLOUD <span class='op'>=</span> <span class='cn'>FALSE</span>,
  LC <span class='op'>=</span> <span class='cn'>FALSE</span>,
  GLINT <span class='op'>=</span> <span class='cn'>FALSE</span>,
  ANGLES <span class='op'>=</span> <span class='cn'>FALSE</span>,
  LATLON <span class='op'>=</span> <span class='cn'>FALSE</span>,
  ERR_MATRIX <span class='op'>=</span> <span class='cn'>FALSE</span>,
  apply_errmatrix <span class='op'>=</span> <span class='cn'>FALSE</span>,
  overwrite <span class='op'>=</span> <span class='cn'>FALSE</span>,
  in_L2_file <span class='op'>=</span> <span class='cn'>NULL</span>,
  selbands_vnir <span class='op'>=</span> <span class='cn'>NULL</span>,
  selbands_swir <span class='op'>=</span> <span class='cn'>NULL</span>,
  indexes <span class='op'>=</span> <span class='cn'>NULL</span>,
  cust_indexes <span class='op'>=</span> <span class='cn'>NULL</span>,
  keep_index_cube <span class='op'>=</span> <span class='cn'>FALSE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>in_file</th>
      <td><p>`character` full path of input HDF5 file</p></td>
    </tr>
    <tr>
      <th>out_folder</th>
      <td><p>`character` full path to output folder</p></td>
    </tr>
    <tr>
      <th>out_filebase</th>
      <td><p>`character` if "auto", output file names are based on
filename of the input prisma file, with appropriate suffixes. If a different
string is provided, it is used as prefix instead of the input file name,
Default: "auto"</p></td>
    </tr>
    <tr>
      <th>out_format</th>
      <td><p>`character`` ["GTiff" | "ENVI"], Output format, Default:
'GTiff'</p></td>
    </tr>
    <tr>
      <th>base_georef</th>
      <td><p>`logical` if TRUE, apply base georeferencing on L1, L2B/C
data, using the "Georeference from input GLT" procedure explained here:
https://www.harrisgeospatial.com/docs/backgroundgltbowtiecorrection.html,
Default: TRUE</p></td>
    </tr>
    <tr>
      <th>fill_gaps</th>
      <td><p>`logical` if TRUE, when georeferencing on L1, L2B/C data,
substitute missing values with results of a 3x3 focal filter on the
georeferenced data, Default: FALSE</p></td>
    </tr>
    <tr>
      <th>VNIR</th>
      <td><p>`logical` if TRUE, create the VNIR image, Default: FALSE</p></td>
    </tr>
    <tr>
      <th>SWIR</th>
      <td><p>`logical` if TRUE, create the SWIR image, Default: FALSE</p></td>
    </tr>
    <tr>
      <th>FULL</th>
      <td><p>`logical` if TRUE, create a single multispectral image from
VNIR and SWIR, Default: FALSE</p></td>
    </tr>
    <tr>
      <th>source</th>
      <td><p>`character` ["HC0" | "HRC"], Considered Data Cub,
Default: 'HCO'</p></td>
    </tr>
    <tr>
      <th>join_priority</th>
      <td><p>`character` ["VNIR" | "SWIR"], spectrometer to consider
when join_spectra = TRUE, Default: SWIR - ignored if join_spectra is FALSE.
Default: "SWIR"</p></td>
    </tr>
    <tr>
      <th>ATCOR</th>
      <td><p>logical` if TRUE, create the text files required to run ATCOR,
Default: FALSE;</p></td>
    </tr>
    <tr>
      <th>ATCOR_wls</th>
      <td><p>NULL, or `numeric` If NULL the only ATCOR wvl file
created is the one containing Nominal wavelengths. If a numeric vector is
provided, then one different wvl file is created for each selected COLUMN
selected (e.g., if providing `ATCOR_wls = c(200, 800)`, then the wavelengths
and FWHMs related to columns 200 and 800 are saved.)</p></td>
    </tr>
    <tr>
      <th>PAN</th>
      <td><p>`logical` if TRUE, also save PAN data, default: FALSE</p></td>
    </tr>
    <tr>
      <th>CLOUD</th>
      <td><p>`logical` if TRUE, also save CLOUD MASK mask data,
Default: FALSE (Ignored for L2 data).
It is coded as:
  0 for not cloudy pixel
  1 for cloudy pixel
  10 = for not of all previous classification
  255 = error</p></td>
    </tr>
    <tr>
      <th>LC</th>
      <td><p>`logical` if TRUE, also save the LAND COVER data, default: FALSE
(Ignored for L2 data)
It is coded as:
 0 for water pixel
 1 for snow pixel (and ice)
 2 for not-vegetated land pixel :bare soil)
 3 for crop and rangeland pixel
 4 for forest pixel
 5 for wetland pixel
 6 for not-vegetated land pixel :urban component
10 for not of all previous classification
255 for error</p></td>
    </tr>
    <tr>
      <th>GLINT</th>
      <td><p>`logical` if TRUE, also save GLINT mask data, default: FALSE
(Ignored for L2 data)
  It is coded as:
  0 for not sun glint
  1 for sun glint
  10 for not of all previous classification
  255 = error</p></td>
    </tr>
    <tr>
      <th>ANGLES</th>
      <td><p>if TRUE, also save the ACQUISITION ANGLES data. ANGLES data are
saved as a 3-band raster. Band 1 contains "viewzen_ang", Band 2 contains
"relaz_ang" and Band 3 contains "solzen_ang"), default: FALSE</p></td>
    </tr>
    <tr>
      <th>LATLON</th>
      <td><p>if TRUE, also save the LATITUDE and LONGITUDE data. LATLON data
are saved as a 2-band raster. Band 1 contains "Lat", Band 2 contains "Lon",
Default: FALSE</p></td>
    </tr>
    <tr>
      <th>ERR_MATRIX</th>
      <td><p>`logical` if TRUE, also save the SATURATION ERROR MATRIX
Data, Default: FALSE
 SATURATION ERROR MATRIX is coded as:
  0=pixel ok;
  1=DEFECTIVE PIXEL from KDP
  2= Pixel in saturation.
  3= Pixel with lower radiometric accuracy, due to coregistration effects.
  4= Pixel becomes NaN or Inf during processing.</p></td>
    </tr>
    <tr>
      <th>apply_errmatrix</th>
      <td><p>`logical` if TRUE, set pixels with values above 0 in
the SATERR_MATRIX data cube (for L1) or ERRMATRIX cube (for L2) to NA,
Default: FALSE</p></td>
    </tr>
    <tr>
      <th>overwrite</th>
      <td><p>`logical` if TRUE, existing files are overwritten,
Default: FALSE</p></td>
    </tr>
    <tr>
      <th>in_L2_file</th>
      <td><p>`character` full path of an L2B/C file to be used to
extract georeferencing info and angles for a corresponding L1 file. If not
NULL, and `in_file` is a L1 file, the LAT and LON fields used for bowtie
georeferencing are taken from the L2 file instead than from the L1 file.
The ANGLES data are also retrieved from the L2 file if requested.</p></td>
    </tr>
    <tr>
      <th>selbands_vnir</th>
      <td><p>`numeric array` containing wavelengths (in nanometers)
of bands that should be extracted from the VNIR data cube. If not NULL, only
the bands with wavelengths closest to these values are extracted,
Default: NULL</p></td>
    </tr>
    <tr>
      <th>selbands_swir</th>
      <td><p>`numeric array` containing wavelengths (in nanometers)
of bands that should be extracted from the SWIR data cube. If not NULL, only
the bands with wavelengths closest to these values are extracted,
Default: NULL</p></td>
    </tr>
    <tr>
      <th>indexes</th>
      <td><p>`character` array of names of indexes to be computed. You can
see a list of available indexes using command `pr_listindexes()`, or see
the corresponding table at:
https://irea-cnr-mi.github.io/prismaread/articles/Computing-Spectral-Indexes.html, #nolint
Default:NULL</p></td>
    </tr>
    <tr>
      <th>cust_indexes</th>
      <td><p>`character` named list containing names and formulas of
custom indexes to be computed. The indexes formulas must be computable R
formulas, where bands are referred to by the prefix "b", followed by the
wavelength (e.g.,`cust_indexes = list(myindex1 = "R500 / R600",
                              myindex2 = "(R800 - R680) / (R800 + R680)")`,
Default:NULL</p></td>
    </tr>
    <tr>
      <th>keep_index_cube</th>
      <td><p>`logical`, if TRUE, and spectral indexes were
computed, keep in the output folder the hyperspectral cube used to compute
the indexes (containing only wavelengths required to compute the desired
indexes). The file takes a "_INDEXES" suffix. If FALSE, put the file in
tempdir so that it is deleted automatically afterwards. Default: FALSE</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The function is called for its side effects</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>

<span class='co'># Here the example file is downloaded from GitHub using `{piggyback}`</span>
<span class='co'># (if not already downloaded).</span>
<span class='co'># WARNING: this may need a long time (1GB file).</span>
<span class='va'>testfile_l1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span>
<span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"testdata/"</span>, package <span class='op'>=</span> <span class='st'>"prismaread"</span><span class='op'>)</span>,
            <span class='st'>"PRS_L1_STD_OFFL_20200524103704_20200524103708_0001.he5"</span><span class='op'>)</span>

<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/files.html'>file.exists</a></span><span class='op'>(</span><span class='va'>testfile_l1</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>{</span>
  <span class='fu'><a href='https://rdrr.io/r/base/message.html'>message</a></span><span class='op'>(</span><span class='st'>"Downloading test data - This may need a long time!"</span><span class='op'>)</span>
  <span class='fu'>piggyback</span><span class='fu'>::</span><span class='fu'><a href='https://docs.ropensci.org/piggyback/reference/pb_download.html'>pb_download</a></span><span class='op'>(</span>
           <span class='st'>"PRS_L1_STD_OFFL_20200524103704_20200524103708_0001.zip"</span>,
           repo <span class='op'>=</span> <span class='st'>"irea-cnr-mi/prismaread"</span>,
           dest <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span>
           <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>""</span>, package <span class='op'>=</span> <span class='st'>"prismaread"</span><span class='op'>)</span>, <span class='st'>"/testdata"</span><span class='op'>)</span><span class='op'>)</span>
  <span class='va'>zipfile</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span>
                    <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"testdata/"</span>, package <span class='op'>=</span> <span class='st'>"prismaread"</span><span class='op'>)</span>,
                    <span class='st'>"PRS_L1_STD_OFFL_20200524103704_20200524103708_0001.zip"</span><span class='op'>)</span>
  <span class='fu'><a href='https://rdrr.io/r/utils/unzip.html'>unzip</a></span><span class='op'>(</span><span class='va'>zipfile</span>, exdir <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/basename.html'>dirname</a></span><span class='op'>(</span><span class='va'>testfile_l1</span><span class='op'>)</span><span class='op'>)</span>
  <span class='fu'><a href='https://rdrr.io/r/base/unlink.html'>unlink</a></span><span class='op'>(</span><span class='va'>zipfile</span><span class='op'>)</span>
<span class='op'>}</span>
<span class='va'>out_folder</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='st'>"prismaread_l1"</span><span class='op'>)</span>

<span class='co'># Save separately the VNIR and SWIR spetral cubes, in Tiff format. Also save</span>
<span class='co'># LATLON, CLOUD and PAN</span>

 <span class='fu'>pr_convert</span><span class='op'>(</span>in_file    <span class='op'>=</span> <span class='va'>testfile_l1</span>,
            out_folder <span class='op'>=</span> <span class='va'>out_folder</span>,
            out_format <span class='op'>=</span> <span class='st'>"GTiff"</span>,
            VNIR       <span class='op'>=</span> <span class='cn'>TRUE</span>,
            SWIR       <span class='op'>=</span> <span class='cn'>TRUE</span>,
            LATLON     <span class='op'>=</span> <span class='cn'>TRUE</span>,
            PAN        <span class='op'>=</span> <span class='cn'>TRUE</span>,
            CLOUD      <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>

 <span class='co'># Save the full cube, prioritizing the SWIR spectrometer and save in ENVI</span>
 <span class='co'># format. Also save Cloud and LC data. Also, use a custom prefix for output</span>
 <span class='co'># files</span>

 <span class='fu'>pr_convert</span><span class='op'>(</span>in_file       <span class='op'>=</span> <span class='va'>testfile_l1</span>,
            out_folder    <span class='op'>=</span> <span class='va'>out_folder</span>,
            out_filebase  <span class='op'>=</span> <span class='st'>"prismaout_2020_05-14"</span>,
            out_format    <span class='op'>=</span> <span class='st'>"ENVI"</span>,
            FULL          <span class='op'>=</span> <span class='cn'>TRUE</span>,
            join_priority <span class='op'>=</span> <span class='st'>"SWIR"</span>,
            LC            <span class='op'>=</span> <span class='cn'>TRUE</span>,
            CLOUD         <span class='op'>=</span> <span class='cn'>TRUE</span>,
            overwrite     <span class='op'>=</span> <span class='cn'>TRUE</span>
            <span class='op'>)</span>

 <span class='co'># Save a full image, prioritizing the VNIR spectrometer and save in TIF</span>
 <span class='co'># format. Also create ATCOR files, with Nominal wavelengths</span>

 <span class='fu'>pr_convert</span><span class='op'>(</span>in_file       <span class='op'>=</span> <span class='va'>in_file</span>,
            out_folder    <span class='op'>=</span> <span class='va'>out_folder</span>,
            out_format    <span class='op'>=</span> <span class='st'>"GTiff"</span>,
            FULL          <span class='op'>=</span> <span class='cn'>TRUE</span>,
            join_priority <span class='op'>=</span> <span class='st'>"VNIR"</span>,
            ATCOR         <span class='op'>=</span> <span class='cn'>TRUE</span>
           <span class='op'>)</span>

<span class='co'># Save the VNIR cube only, asociating a L2 file to be able to retrieve</span>
<span class='co'># ANGLES data</span>
<span class='va'>testfile_l1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"testdata/"</span>, package <span class='op'>=</span> <span class='st'>"prismaread"</span><span class='op'>)</span>,
                       <span class='st'>"PRS_L2D_STD_20200524103704_20200524103708_0001.he5"</span><span class='op'>)</span>
<span class='va'>testfile_l2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"testdata/"</span>, package <span class='op'>=</span> <span class='st'>"prismaread"</span><span class='op'>)</span>,
                        <span class='st'>"PRS_L2C_STD_20200524103704_20200524103708_0001.he5"</span><span class='op'>)</span>

<span class='co'># Here we download the example file from github if not already downloaded.</span>
<span class='co'># WARNING ! This may need a long time (1GB file)</span>

<span class='kw'>if</span> <span class='op'>(</span><span class='op'>!</span><span class='fu'><a href='https://rdrr.io/r/base/files.html'>file.exists</a></span><span class='op'>(</span><span class='va'>testfile_l2</span><span class='op'>)</span><span class='op'>)</span><span class='op'>{</span>
 <span class='fu'><a href='https://rdrr.io/r/base/message.html'>message</a></span><span class='op'>(</span><span class='st'>"Downloading test data - This may need a long time!"</span><span class='op'>)</span>
 <span class='fu'>piggyback</span><span class='fu'>::</span><span class='fu'><a href='https://docs.ropensci.org/piggyback/reference/pb_download.html'>pb_download</a></span><span class='op'>(</span>
                 <span class='st'>"PRS_L2C_STD_20200524103704_20200524103708_0001.zip"</span>,
                 repo <span class='op'>=</span> <span class='st'>"irea-cnr-mi/prismaread"</span>,
                 dest <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span>
                       <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>""</span>, package <span class='op'>=</span> <span class='st'>"prismaread"</span><span class='op'>)</span>, <span class='st'>"/testdata"</span><span class='op'>)</span><span class='op'>)</span>
 <span class='va'>zipfile</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span><span class='op'>(</span><span class='st'>"testdata/"</span>, package <span class='op'>=</span> <span class='st'>"prismaread"</span><span class='op'>)</span>,
                      <span class='st'>"PRS_L2C_STD_20200524103704_20200524103708_0001.zip"</span><span class='op'>)</span>
 <span class='fu'><a href='https://rdrr.io/r/utils/unzip.html'>unzip</a></span><span class='op'>(</span><span class='va'>zipfile</span>, exdir <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/basename.html'>dirname</a></span><span class='op'>(</span><span class='va'>testfile_l1</span><span class='op'>)</span><span class='op'>)</span>
 <span class='fu'><a href='https://rdrr.io/r/base/unlink.html'>unlink</a></span><span class='op'>(</span><span class='va'>zipfile</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='va'>out_folder</span> <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/file.path.html'>file.path</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/tempfile.html'>tempdir</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='st'>"prismaread_l2"</span><span class='op'>)</span>

<span class='fu'>pr_convert</span><span class='op'>(</span>in_file    <span class='op'>=</span> <span class='va'>in_file</span>,
          in_L2_file <span class='op'>=</span> <span class='va'>in_L2_file</span>,
          out_folder <span class='op'>=</span> <span class='va'>out_folder</span>,
          out_format <span class='op'>=</span> <span class='st'>"ENVI"</span>,
          VNIR       <span class='op'>=</span> <span class='cn'>TRUE</span>,
          ANGLES     <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='op'>}</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Lorenzo Busetto, Luigi Ranghetti.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>




  </body>
</html>


